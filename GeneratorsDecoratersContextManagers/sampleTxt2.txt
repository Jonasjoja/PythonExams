Written with use of @contextmanager decorator